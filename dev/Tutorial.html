<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · AgentModel.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="AgentModel.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">AgentModel.jl</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li class="is-active"><a class="tocitem" href="Tutorial.html">Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Uploading-the-package"><span>Uploading the package</span></a></li><li><a class="tocitem" href="#Creating-an-empty-model"><span>Creating an empty model</span></a></li><li><a class="tocitem" href="#Adding-mechanics"><span>Adding mechanics</span></a></li><li><a class="tocitem" href="#Testing-the-model-so-far"><span>Testing the model so far</span></a></li></ul></li><li><a class="tocitem" href="API.html">API</a></li><li><a class="tocitem" href="APIdevelopers.html">API for Developers</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="Tutorial.html">Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="Tutorial.html">Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/gatocor/AgentBasedModels.jl/blob/master/docs/src/Tutorial.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h1><p>In order to see the capabilities and how to generate and run models, we will consider a real example from the field of life sciences <a href="https://elifesciences.org/articles/56079">Saiz 2020</a>.</p><h2 id="Uploading-the-package"><a class="docs-heading-anchor" href="#Uploading-the-package">Uploading the package</a><a id="Uploading-the-package-1"></a><a class="docs-heading-anchor-permalink" href="#Uploading-the-package" title="Permalink"></a></h2><p>We start uploading the package.</p><pre><code class="language-">using AgentBasedModels</code></pre><h2 id="Creating-an-empty-model"><a class="docs-heading-anchor" href="#Creating-an-empty-model">Creating an empty model</a><a id="Creating-an-empty-model-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-an-empty-model" title="Permalink"></a></h2><p>The first step for creating any model is to create and empty Model structure.</p><pre><code class="language-julia">model = Model()</code></pre><p>In this model we will incorporate all the pieces of the final Agent Based Model. This structure helps to add pieces to the model in a constructive manner helping to constructively create modules.</p><p>Schamatically, in the agent based model in the <a href="https://elifesciences.org/articles/56079">Saiz 2020</a> has three subparts:</p><ul><li>It has mechanics, leading to movement in the cells.</li><li>It has a chemical interactions, leading to exchange of concentrations.</li><li>It has division events representing the growing organism.</li></ul><p>We will go contruct the model in three separated sections.</p><h2 id="Adding-mechanics"><a class="docs-heading-anchor" href="#Adding-mechanics">Adding mechanics</a><a id="Adding-mechanics-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-mechanics" title="Permalink"></a></h2><p>The dynamics of the cells follow the following equations.</p><p class="math-container">\[m_i\frac{dv_i}{dt} =-bv_i+\sum_j F_{ij}\]</p><p class="math-container">\[\frac{dx_i}{dt} =v_i\]</p><p>where the force is</p><p class="math-container">\[F_{ij}=
\begin{cases}
F_0(\frac{r_{ij}}{d}-1)(\frac{\mu r_{ij}}{d}-1)\frac{(x_i-x_j)}{d}\hspace{1cm}\text{if}\;d&lt;\mu r_{ij}\\
0\hspace{4.8cm}\text{otherwise}
\end{cases}\]</p><p>If we observe, the model has five different types of terms:</p><ul><li><strong>Global parameters</strong> (<span>$b$</span>,<span>$F_0$</span>,<span>$\mu$</span>): These are parameters that will be shared among all the agent in the model.</li><li><strong>Local parameters</strong> (<span>$m_i$</span>): These are parameters that vary between cells.</li><li>Pairwise interactions (<span>$F_{ij}$</span>,<span>$d_{ij}$</span>,<span>$r_{ij}$</span>): This are terms that come from the pairwise interaction between two agents.</li><li><strong>Interaction parameters</strong> (<span>$\sum_j F_{ij}$</span>): These are parameters that are computed as a sum of all pairwise interactions from one agent to the rest.</li><li><strong>Variables</strong> (<span>$v_i$</span>,<span>$x_i$</span>): These are the variables of the dynamical system.</li></ul><p>Once we have identified all the contributions, we will proceed to declare all the terms in the model.</p><p>First, we introduce the global variables <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>.  It is possible to intriduce all of them at one:</p><pre><code class="language-julia"> addGlobal!(model,[:b,:F₀,:μ])</code></pre><p>Then we will define the local parameters.</p><pre><code class="language-julia"> addLocal!(m,[:m,:r])</code></pre><p>An then the interaction parameters. It is important to notice that we only declare the interacting parameters, that are the sum over all the neighbours of each agent. The pariwise interactions are not usually of interest and having a list of the contributions of each pair would require a lo of memory. Hence, we compute them only to store them in the pariwise interaction terms.</p><pre><code class="language-julia"> interaction = 
 &quot;
 #Define the pairwise distance
 dₐ = sqrt((x₁-x₂)^2+(y₁-y₂)^2+(z₁-z₂)^2)
 #Define the radius sum
 rrₐ = r₁+r₂                              
 #Define the force components under the condition
 if dₐ &lt; μ*rrₐ &amp;&amp; dₐ &gt; 0. #Make sure that the force avoids itself or it will diverge 
     Fx₁ += F₀*(rrₐ/dₐ-1)*(μ*rrₐ/dₐ-1)*(x₁-x₂)/dₐ #sum_j F_ij for the x component
     Fy₁ += F₀*(rrₐ/dₐ-1)*(μ*rrₐ/dₐ-1)*(y₁-y₂)/dₐ
     Fz₁ += F₀*(rrₐ/dₐ-1)*(μ*rrₐ/dₐ-1)*(z₁-z₂)/dₐ
 else #This is not really necessary but we include it in the example for shake of completeness
     Fx₁ += 0.
     Fy₁ += 0.
     Fz₁ += 0.
 end
 &quot;
 addInteraction!(m,[:Fx,:Fy,:Fz],interaction)</code></pre><p>Finally, we will have to include the variables and their dynamical equations.</p><pre><code class="language-julia">eqs = 
#Define the dynamic equations
eqs=
&quot;
dvx = (-b*vx/m+Fx/m)*dt
dvy = (-b*vy/m+Fy/m)*dt
dvz = (-b*vz/m+Fz/m)*dt
dx = vx*dt
dy = vy*dt
dz = vz*dt
&quot;
addVariable!(m,[:vx,:vy,:vz,:x,:y,:z],eqs)</code></pre><p>And that is it. We have included the dynamical equations to the model.</p><h2 id="Testing-the-model-so-far"><a class="docs-heading-anchor" href="#Testing-the-model-so-far">Testing the model so far</a><a id="Testing-the-model-so-far-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-the-model-so-far" title="Permalink"></a></h2><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>The order in which you declare the different parameters and variables is indiferent.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="API.html">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 19 February 2021 10:38">Friday 19 February 2021</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
